# 语音识别功能说明

## 功能概述

本模块提供语音转文字功能，支持中文语音识别，并可以解析旅行相关的关键词（如目的地、预算、天数等）。

## 技术实现

- **前端**：使用 MediaRecorder API 录制音频，通过 axios 发送到后端
- **后端**：使用 Express 和 multer 处理音频文件上传，提供模拟的语音识别服务
- **测试**：提供专门的测试页面和测试脚本

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 配置环境变量

确保已在 `config/.env` 文件中配置了必要的环境变量。

### 3. 启动后端服务

```bash
npm run dev
```

## 测试方法

### 方法一：使用测试脚本

```bash
node test-speech.js
```

### 方法二：使用前端测试页面

1. 确保前端服务已启动：

```bash
cd ../frontend
npm run dev
```

2. 访问测试页面：http://localhost:3000/speech-test

3. 点击"开始录音"按钮，对着麦克风说中文旅行相关内容

4. 点击"停止录音"按钮，查看识别结果

## 支持的语音指令示例

- "我想去北京旅行，预算5000元，计划玩5天"
- "上海三日游，预算3000"
- "三亚度假，玩一个星期，带孩子"
- "成都美食之旅，两个人，预算8000"
- "西安古都探索，6天时间，预算6000"

## 功能特点

1. **实时录音**：支持浏览器实时录制音频
2. **自动解析**：可自动识别目的地、预算、天数等关键信息
3. **历史记录**：保存识别历史，方便查看
4. **错误处理**：完善的错误提示和异常处理
5. **模拟服务**：提供模拟的语音识别服务，便于测试

## 实际部署说明

当项目实际部署时，需要将 `services/speechService.js` 中的模拟实现替换为实际的讯飞语音识别 API 调用，使用环境变量中的 API 密钥和相关配置。

## 常见问题

1. **无法访问麦克风**：请检查浏览器是否有权限使用麦克风，以及是否在 HTTPS 环境下运行（某些浏览器要求）

2. **后端服务连接失败**：确保后端服务正在运行，且端口配置正确（默认为 5000）

3. **识别结果不准确**：当前使用的是模拟服务，实际部署时使用真实的语音识别 API 会获得更准确的结果